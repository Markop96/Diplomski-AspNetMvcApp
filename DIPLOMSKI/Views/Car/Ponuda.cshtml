@model IEnumerable<M_RENT_Aplikacija.Models.ViewModels.Automobil>

@{
    ViewData["Title"] = "Choose Car";
}
<style>
    body {

        cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>🚗</text></svg>") 16 0,auto;
    }

    .footer{
    position:relative;
    }

    .container {
        padding-top: 2px;
        padding-bottom: 50px;
    }


    td {
        text-align: center;
    }

    th {
        text-align: center
    }

    .style1 {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        padding-top: 50px;
        padding-bottom: 75px;
    }

    .style2 {
        justify-content: center;
        align-items: center;
        height: 100%;
        padding-top: 10px;
        padding-bottom: 50px;
    }

    .naslov {
        text-align: center;
        font-size: 60px;
        font-weight: 900;
        color: #011401;
        text-shadow: 8px 0 rgb(182 255 0);
        scroll-padding-top: 20px;
    }

    .slider-wrapper {
        position: relative;
        max-width: 50%;
        margin: 0 auto;
        margin-top:100px
    }

    .slider {
        display: flex;
        aspect-ratio: 16/9;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
    }

        .slider img {
            padding-left: 20px;
            scroll-snap-align: start;
            object-fit: cover;
        }
    .text1 {
        text-align: justify;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: 30px;
        font-weight: 900;
        padding-bottom:20PX;
    }

    .text {
        text-align: justify;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: 25px;
        font-weight: 700;
        padding-bottom: 20PX;
    }

    .padajucaLista {
        background-color: green;
    }

    .form-control.lista {
        color: green;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        font-size: 20px;
    }

    .dugme:hover {
        background-color: greenyellow;
        color: darkgreen;
        transform: scale(1.5);
        border: solid green 6px;
        cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>🚙</text></svg>") 16 0,auto;
    }

    .dugme {
        background-color: darkgreen;
        color: greenyellow;
        border-radius: 10px 0 40px 0;
        border: solid black 6px;
        width: 300px;
    }

    .removedugme {
        background-color: red;
    }

        .removedugme:hover {
            background-color: black;
            color: red;
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>❌</text></svg>") 16 0,auto;
        }

    .dugmeDodaj {
        background-color: deeppink;
        color: white;
        font-weight: 900;
        border: 2px solid deeppink;
        border-radius: 10px;
        font-size: 25px;
        margin-bottom: 150px;

    }

        .dugmeDodaj:hover {
            border: 2px solid deeppink;
            color: yellowgreen;
            background-color: deeppink;
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>🚙</text></svg>") 16 0,auto;
            transform:none;
        }
    dugmePlus {
    text-align:center;
    }

    #txtFinalTotal {
        color: red;
        font-weight: 900;
        font-size: 40px;
        background-color: greenyellow;
        text-align: center; 
        max-width: 700px;
        margin: 0 auto; 
        display: block; 
    }

    .removeItem{
    
    background-color:red;
    }

    .removeItem:hover {
        background-color: black;
    }

      .carousel-item {
        transition: transform 0s ease;
    }

        .carousel-item img {
            max-height: 500px; 
            width: auto;
            max-width: 100%;
            object-fit: contain; 
        }

</style>
<h1 class="naslov" style="font-size:130px;">KALKULATOR CENA</h1>
<hr />
<fieldset>
<div class="style1">
    <div class="col-md-6">
        <form id="carForm">
            <div class="form-group text1">
                <label for="carSelect">Izaberite automobil:</label>
                    <p style="font-weight:100; font-size:20px; color:gray;"> <i>(klikom na polje izlistaće se svi dostupni automobili)</i></p>
                    <select id="carSelect" class="form-control" style="background-color:rgb(209, 247, 148); font-size:24px;">
                        <option value="">🚘</option>
                    @foreach (var car in Model)
                    {
                        <option value="@car.Name">@car.Name</option>
                    }
                </select>
            </div>
            <div class="form-group text1">
                <label for="carPrice">Cena:</label>
                    <input type="text" id="carPrice" class="form-control" readonly style="color:#ff0000; background-color:greenyellow; font-size:40px; font-weight:900; text-align:center" />
            </div>
            <div class="form-group text1" style="padding-bottom:50px;">
                <label for="days">Broj dana:</label>
                    <input type="number" id="days" class="form-control" min="1" value="1" style="font-size:30px; font-weight:900; background-color:rgb(209, 247, 148)" />
            </div>
            <div style="text-align:center">
                    <button type="button" id="btnAddToList" style="border:none; width:70px;background-color:white;"><img src="~/Slike/dugme.png" style="width:70px;" /></button>
            </div>
        </form>
    </div>
</div>
</fieldset>
<fieldset class="style2">
    <legend class="naslov" style="padding-bottom:40px;">LISTA IZABRANIH AUTOMOBILA</legend>
    <div class="table-responsive">
        <table class="table table-bordered text" id="tblRentACarItemList">
            <thead class="thead-dark">
                <tr>
                    <th style="display: none;">Item Id</th>
                    <th>ITEM NAME</th>
                    <th>PRICE</th>
                    <th>NUMBER OF DAYS</th>
                    <th>TOTAL PRICE</th>
                    <th>ACTION</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</fieldset>

<div style="text-align:center; margin-bottom:150px;">
    <div>
        <div class="form-group">
            <label for="txtFinalTotal" class="naslov" style="padding-top:80px; padding-bottom:40px;">UKUPNA CENA</label>

            <input type="text" id="txtFinalTotal" class="form-control" readonly/>
        </div>
        
    </div>
    <p> <i>Sve cene na sajtu su izražene u eurima</i></p>
</div>

<fieldset class="container">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="200">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="5"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="6"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="7"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="8"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="9"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="10"</li>
            <li data-target="#carouselExampleIndicators" data-slide-to="11"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="12"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="13"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="14"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="15"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="16"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="17"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="18"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="19"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="~/Slike/cars/mini.png" alt="1 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/audiK.png" alt="2 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/clio1.png" alt="3 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/c3.jpg" alt="4 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/c5.PNG" alt="5 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/golf7.png" alt="6 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/astraj.png" alt="7 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/folf6.png" alt="8 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/skoda1.png" alt="9 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/bmwJ.png" alt="10 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/gclass.png" alt="11 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/tiguan.png" alt="12 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/porsheJ.png" alt="13 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/RangeRover.png" alt="14 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/kia.png" alt="15 slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/ferari.png" alt="First slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/lambo1.png" alt="Second slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/r8.png" alt="Third slide">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="~/Slike/cars/urus.png" alt="Third slide">
            </div>
</fieldset>


@section Scripts {
    <script>
        $(document).ready(function () {
            $("#carSelect").change(function () {
                var selectedCar = $(this).val();
                if (selectedCar !== "") {
                    GetItemPrice(selectedCar);
                } else {
                    $("#carPrice").val("");
                }
            });

            function GetItemPrice(carName) {
                $.ajax({
                    async: true,
                    type: 'GET',
                    dataType: 'json',
                    data: { name: carName },
                    url: '/Car/GetPriceByName',
                    success: function (data) {
                        $("#carPrice").val(parseFloat(data).toFixed(2));
                    },
                    error: function () {
                        alert("There was an error while getting the price.");
                    }
                });
            }

            $("#btnAddToList").click(function () {
                var selectedCar = $("#carSelect").val();
                var carName = $("#carSelect option:selected").text();
                var carPrice = $("#carPrice").val();
                var days = $("#days").val();

                if (selectedCar !== "" && carPrice !== "" && days !== "") {
                    var totalPrice = parseFloat(carPrice) * parseInt(days);
                    var itemRow = "<tr><td hidden>" + selectedCar + "</td><td>" + carName + "</td><td>" + carPrice + "</td><td>" + days + "</td><td>" + totalPrice.toFixed(2) + "</td><td><button type='button' class='btn btn-danger removeItem'>Remove</button></td></tr>";
                    $("#tblRentACarItemList tbody").append(itemRow);
                    FinalItemTotal();
                } else {
                    alert("Molim Vas odaberite sve stavke!");
                }
            });

            $(document).on("click", ".removeItem", function () {
                $(this).closest("tr").remove();
                FinalItemTotal(); 
            });

            function FinalItemTotal() {
                var finalTotal = 0.00;
                $("#tblRentACarItemList").find("tr:gt(0)").each(function () {
                    var total = parseFloat($(this).find("td:eq(4)").text());
                    finalTotal += total;
                });

                $("#txtFinalTotal").val(finalTotal.toFixed(2));
            }
        });

        $(document).ready(function () {
            $('.carousel').carousel();
        });

    </script>
}
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>